<!DOCTYPE html>
<html ng-app="myApp" class="htmlWeiLei">
<head>
	<meta charset="utf-8">
    <meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0"/>
    <meta name="format-detection" content="telephone=no,email=no,date=no,address=no">
    <title>title</title>
    <link rel="stylesheet" type="text/css" href="../../css/api.css"/>
    <style>
    	.booksList2{
    		background:white;
    		margin-top:5px;
    		padding:0 10px 10px 10px;
    	}
    	.booksList2 ul li{
    		border-bottom:0px solid #f3f3f3;
    		margin-bottom:10px;
    	}
    	.booksList2 ul li:last-child{
    		border-bottom:0;
    	}
    	.booksList2 ul li .bookCover{
    		float:left;
    		width:15%;
    		margin-bottom:10px;
    		margin-top: 10px;
    	}
    	.booksList2 ul li .bookCover img{
    		width:100%;
    		height: 85px; 
    		
    	}
    	.booksList2 ul li .bookInfo{
    		float:left;
    		width:76%;
    		margin-left:3%;
    		font-size:11px;
    		color:#787878;
    		line-height:15px;
    	}
    	.booksList2 ul li .bookInfo .booksName{
    		font-size:13px;
    		color:#484848;
    		margin-top:5px;
    		line-height:25px;
    	}

    	.booksList2_title{
    		padding:0;
    	}
    	.author{
    		margin-top:15px;
    		color:#484848;
    	}
    	.author img{
width: 10px; height: 10px;
vertical-align: middle;
    	}
    	.label{
    		padding:1px;
    		line-height:15px;
    		float:right;
    		border:1px solid #bbdba8;
    		border-radius:3px;
    		color:#bbdba8;
    		margin-right: 5px;
    	}
    	.labels{
    		padding:1px;
    		line-height:15px;
    		margin-right: 5px;
    		float:right;
    		border:1px solid #99bbda;
    		border-radius:3px;
    		color:#99bbda;
    	}
    	.txt{
    		overflow: hidden;
		 	text-overflow: ellipsis;
		 	display: -webkit-box;
		 	-webkit-line-clamp: 3;
		 	-webkit-box-orient: vertical;
    	}
    	.author{
    		font-weight:600;
    		color:#484848;
    	}
    	
    	@media screen and (max-width: 320px) {
		    .booksList2 ul li .bookCover{
		    	width:25%;
		    }
		}
		@media screen and (min-width:321px) and (max-width: 375px){
		    .booksList2 ul li .bookCover{
		    	width:22%;
		    }
		    .booksList2 ul li .bookInfo{
		    	width:75%;
		    }
		}
		@media screen and (min-width:376px) and (max-width: 414px){
		    .booksList2 ul li .bookCover{
		    	width:20%;
		    	
		    }
		    .booksList2 ul li .bookInfo{
		    	width:77%;
		    }
		}
    </style>
</head>
<body ng-controller="DataController">
	<div class="booksList2">
		<ul>
		<li class="clearfix" ng-repeat="b in bookList" ng-click="bookdetail(b.articleid)">
				<div class="bookCover">
					<img src="{{imgurl + b.images}}" alt="" />
				</div>
				<div class="bookInfo">
					<p class="booksName">{{b.articlename}}</p>
					<p class="txt">
						{{b.intro}}
					</p>
					<div class="author">
						<span>
							<i class="iconfont"><img src="../../image/authors.png"/></i>
							{{b.author}}
						</span>
						
						<span class="labels">
							{{b.shortname}}
						</span>
						<span class="label">
							{{(b.size/20).toFixed(1)}}万字
						</span>
					</div>
				</div>
			</li>
			<!--<li class="clearfix">
				<div class="bookCover">
					<img src="../../image/book0.png" alt="" />
				</div>
				<div class="bookInfo">
					<p class="booksName">在时光尽头等你</p>
					<p class="txt">
						小四有次在接受采访的时候提到齐名的死，他不是因为对易瑶的死内疚或是对森湘的死痛苦才自杀的
						，齐名总是
					</p>
					<div class="author">
						<span>
							<i class="iconfont"><img src="../../image/authors.png"/></i>
							倾城
						</span>
						
						<span class="labels">
							都市言情
						</span>
						<span class="label">
							10万字
						</span>
					</div>
				</div>
			</li>
			<li class="clearfix">
				<div class="bookCover">
					<img src="../../image/book0.png" alt="" />
				</div>
				<div class="bookInfo">
					<p class="booksName">在时光尽头等你</p>
					<p class="txt">
						小四有次在接受采访的时候提到齐名的死，他不是因为对易瑶的死内疚或是对森湘的死痛苦才自杀的
						，齐名总是
					</p>
					<div class="author">
						<span>
							<i class="iconfont"><img src="../../image/authors.png"/></i>
							倾城
						</span>
						
						<span class="labels">
							都市言情
						</span>
						<span class="label">
							10万字
						</span>
					</div>
				</div>
			</li><li class="clearfix">
				<div class="bookCover">
					<img src="../../image/book0.png" alt="" />
				</div>
				<div class="bookInfo">
					<p class="booksName">在时光尽头等你</p>
					<p class="txt">
						小四有次在接受采访的时候提到齐名的死，他不是因为对易瑶的死内疚或是对森湘的死痛苦才自杀的
						，齐名总是
					</p>
					<div class="author">
						<span>
							<i class="iconfont"><img src="../../image/authors.png"/></i>
							倾城
						</span>
						
						<span class="labels">
							都市言情
						</span>
						<span class="label">
							10万字
						</span>
					</div>
				</div>
			</li><li class="clearfix">
				<div class="bookCover">
					<img src="../../image/book0.png" alt="" />
				</div>
				<div class="bookInfo">
					<p class="booksName">在时光尽头等你</p>
					<p class="txt">
						小四有次在接受采访的时候提到齐名的死，他不是因为对易瑶的死内疚或是对森湘的死痛苦才自杀的
						，齐名总是
					</p>
					<div class="author">
						<span>
							<i class="iconfont"><img src="../../image/authors.png"/></i>
							倾城
						</span>
						
						<span class="labels">
							都市言情
						</span>
						<span class="label">
							10万字
						</span>
					</div>
				</div>
			</li>-->
			
		</ul>
	</div>
		<div class="bottom_loadmore"></div>
</body>
<script type="text/javascript" src="../../script/api.js"></script>
<script type="text/javascript" src="../../script/common.js"></script>
<script type="text/javascript" src="../../script/jquery-2.1.4.js"></script>
<script src="../../script/angular.min.js"></script>
<script src="../../script/ionic.bundle.js"></script>
<script src="../../script/ev.js"></script>
<script type="text/javascript">
	$(".booksList2 li").click(function(){
	    api.openWin({
	       name: 'win_header4545454',
	       url: '../win_header.html',
	       pageParam:{
               frm_name:'goods_detai54565',
               frm_url:'frame0/bookDetails.html',
               title:'书籍详情',
              
	       }
        });
	})
	var bookurl="Home/Book/recommend";

	

	
		apiready = function(){
		EventT.emit("apiready");

//getData(0);
	};
	
	
		var app = angular.module("myApp", []);
	app.controller("DataController",function($scope){//angular开始
	$scope.bookList = [];
	$scope.imgurl = imageUrl;
	function getData(page,callback){

	$api.post(phpurl+bookurl,{
			values:{
				page:page
			}
		},function(ret){
//		alert($api.jsonToStr(ret));
          var result = ret.result;
			if(ret.code == 200){
				if(ret.result.length > 0){
				     if(page == 0){
				          $scope.bookList = [];
				       }
					$scope.bookList = $scope.bookList.concat(result);
					$scope.$apply();
				}
		
				$api.closeloadding();//关闭加载
			}else{
				 $api.toast('很是遗憾，没加载到数据');
				$api.closeloadding();//关闭加载
			}
			callback&&callback(ret);
		})
	
	}
	
	$scope.bookdetail=function(dates)
		{

       api.openWin({
	       name: 'win_headerfdsaf',
	       url: '../win_header.html',
	       pageParam:{
               frm_name:'goods_detail25655',
               frm_url:'frame0/bookDetails.html',
               title:'书籍详情',
               data:{
               bookid:dates
                   }
	                         }
                             });
		     
		

		
		}
		
	
	     EventT.on("apiready",function(){
	     		var ps=api.pageParam.data.ps;
		if(ps==2){
		 bookurl="Home/Book/recommend";
		}
		else if(ps==3){
		 bookurl="Home/Book/goodbook";
		}
		else if(ps==4){
		 bookurl="Home/Book/overbook";
		}
		getData(0);
		$api.up(function(page,callback){
	
            getData(page,function(ret){
	           callback&&callback(ret);
	        })
	    });
	    $api.pull(function(callback){
	 
	        getData(0,function(){
	            callback&&callback();
	        })
	    })
	})
	
	});
</script>
</html>