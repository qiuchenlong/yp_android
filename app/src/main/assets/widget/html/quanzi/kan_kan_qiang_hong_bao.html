<!DOCTYPE HTML>
<html ng-app="myApp" class="htmlWeiLei">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0"/>
    <meta name="format-detection" content="telephone=no,email=no,date=no,address=no">
    <title>Hello APP</title>
    <link rel="stylesheet" type="text/css" href="../../css/api.css" />
    <link rel="stylesheet" id="css" href="../../css/theme.css">
	<style>
		body,html {
			background:#fff;
			height:100%;
			overflow: hidden;
		}
		.head{
			text-align:center;
			line-height:45px;
			position:fixed;
			top:0px;
			left:0;
			width:100%;
			
			z-index: 3;	
			overflow: hidden
		}
		.back,.more{
			display:inline-block;
			width:40px;
			height:45px;
			line-height:45px;
			color:#484848;
			text-align:center;
			position:absolute;
			right:8px;
		}
		.head span{
			color:#fff;
		}
		.head .back{
			left:0;
/*			line-height:50px;*/
		}
		.icon-fanhui{
			font-size:25px;
			font-weight:600;
			color:#fff;
		}
		.more{
			width:auto;
			
		}
		.more i{
			font-size:20px;
		}

	

    	.img {
    	
    		padding-top: 170px;
    		padding-bottom: 20px;
			position: relative;
			overflow: hidden;
    	}

    	.img .red {
    		width: 120%;
    		position: absolute;
    		left:-10%;
    		top:-180px;
    		height: 300px;
    		background:red;
    		border-radius:0 0 50% 50%;
    	}

    	.img .red img {
			height: 90px;
			width:90px;
			border-radius: 50%;
			position: absolute;
			bottom:-45px;
			left:50%;
			margin-left:-45px;
    	}

		.hong_bao_biao_ti {
			line-height: 20px;
			font-size: 13px;
			text-align: center;
		}

		.img .jia_ge {
			margin: 12px 0 0px;
			line-height: 22px;
			text-align: center;
			font-size: 18px;
			color:red;
			font-weight: 600;
		}

		.jia_ge span {
			font-size: 8px;
		}

		.cun_ru {
			font-size: 10px;
			line-height: 14px;
			color:#999;
			text-align: center;
		}

		.biao_ti {
			line-height: 30px;
			padding: 10px 10px 3px 10px;
			background-color:#eee;
			font-size: 12px;
			color:#333;
		}
		
		.xin_xi_lie_biao_div {
			overflow-y: auto;
		}
		.xin_xi_lie_biao {
			overflow-y: auto;
			background:#eee;
		}
		.xin_xi_lie_biao li {
			padding: 10px;
			background:#fff;
			border-bottom:6px solid #eee;
		}
		
		.xin_xi_lie_biao li:last-of-type{
			margin-bottom:180px;
		}
		
		
		.xin_xi_lie_biao .ni_rong_tuo,
		.xin_xi_lie_biao .tou_xiang {
		    width: 50px;
		    height:50px;

		}
		.xin_xi_lie_biao .ni_rong_tuo img,
		.xin_xi_lie_biao .tou_xiang img {
		    width: 100%;
		    height: 100%;
		    border-radius:50%;
		}
		.xin_xi_lie_biao .text{
			padding:0 10px;
		}
		.xin_xi_lie_biao .text h3{
			font-size: 12px;
			color:#333;
			font-weight: 100;
			line-height: 20px;
			margin-top:5px;
		}

		.xin_xi_lie_biao .text h3 span {
			float: right;
			color:rgb(77,77,77);
			font-size: 10px;
		}
		
		.xin_xi_lie_biao .jia_ge {
			line-height:50px;
			font-size:14px;
			color:red;
		}

		.xin_xi_lie_biao .text .ni_rong {
			line-height: 20px;
			padding:2px 0;
			font-size: 11px;
			
			color:#999;
		}

		

	</style> 
</head>
<body ng-controller="LoctionController">
  <header class="head" >
		<div class="back" onclick="api.closeWin({});"><i class="iconfont icon-fanhui"></i></div>
		<span class="title">红包详情</span>
	</header>
	<div class="img">
		<div class="red">
			<img src="{{ Imageurl+data.sumbmasterimg }}"   alt="">
		</div>
		<h5 class="hong_bao_biao_ti">{{ data.name }}</h5>
		<p class="jia_ge">{{ data.money }} <span>元</span></p>
		<p class="cun_ru">已存入账号，可用抵扣购物</p>
	</div>
	<div class="biao_ti">
		{{ data.redcount }}个红包，共{{ data.redmoney }}元
	</div>
	<div class="xin_xi_lie_biao_div">
		<ul class="xin_xi_lie_biao">
	        <li class="flex-wrap" ng-repeat="x in list">
	            <div class="tou_xiang">
	                <img src="{{ Imageurl+ x.sumbheadimg }}" onclick="$api.open_user(this.id)" id="{{ x.name+','+x.user_id }}"  alt="">
	            </div>
	            <div class="flex-con text">
	                <h3 class="ming_zi text-ov">{{ x.name }}<span></span></h3>
	                <p class="ni_rong text-ov-2">{{ x.addtime }}</p>
	               
	            </div>
	            <div class="jia_ge">{{ x.money }}元</div>
	        </li>
	        
	        
	          
	        
	        <p class="no-datas" ng-show="!list.length" >还没有人抢红包,快去抢吧！</p>
	        <div style="text-align:center" class="bottom_loadmore"></div>
	    </ul>
	</div>
	
</body>
<script type="text/javascript" src="../../script/api.js"></script>
<script type="text/javascript" src="../../script/jquery-2.1.0.js"></script>
<script type="text/javascript" src="../../script/common.js"></script>
<script src="../../script/angular.min.js"></script>
<script src="../../script/ev.js"></script>
<script>
	var h = $('html').height() - $('.img').height() - $('.biao_ti').height() -50;
	$('.xin_xi_lie_biao_div').css({height:h+'px'});
	var circle_id = 0;
	getTheme();
	apiready = function(){
		changeTheme();
		circle_id = api.pageParam.circle_id||0;
		EventT.emit('apiready');
	};
	
	

	
	
	
	
	var app = angular.module("myApp", []);
	app.controller('LoctionController', ['$scope',function($scope) {
		EventT.on('apiready', function() {
			$scope.Imageurl = Imageurl;
			$api.post(phpurl+'RedPacket/getCRDetail', {
				values:{
					user_id:userid,
					circle_id:circle_id	
				}
			},function(ret){
				if(ret&&ret.code==200&&ret.result&&ret.result.length){
					$scope.data = ret.result[0];
					$scope.$apply();
				}else{
					$api.t(ret.errorname);
				}
				$api.closeloadding();
			});
			
			getList(0);
			$api.up(function(page,callback){
	            getList(page,function(ret){
		           callback&&callback(ret);
		        })
		   	},{
				dom:$('.xin_xi_lie_biao_div')[0],
				top:20,
			});
			
			function getList(page,fn){
				$api.post(phpurl+'RedPacket/RedList',{
					values:{
						circle_id:circle_id	,
						page:page||0
					}
				},function(ret){
					fn&&fn(ret);
					
					if(ret&&ret.code==200&&ret.result&&ret.result.length){
						$scope.list = ret.result;
					}else{
						if(page==0){
							$scope.list = [];
						}
					}
					$scope.$apply();
				})
			}
		})
	}])
</script>
</html>